#!/usr/bin/env bash

# Consider using Appendix config of repo2docker
# This example shows how to use 
# [`appendix`](https://binderhub.readthedocs.io/en/latest/reference/app.html?highlight=c.BinderHub.appendix%20#binderhub.app.BinderHub) 
# feature of BinderHub. 

remote_branch_exists=$(git ls-remote --refs -q "${BINDER_REPO_URL}" "${GIT_BRANCH}" | wc -l)
if [ "${remote_branch_exists}" == "1" ]; then
    git pull origin "${GIT_BRANCH}"
else
    git pull origin master
    git merge master
fi
echo "Post-start script executed successfully" > poststart.log